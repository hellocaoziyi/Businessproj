ORG 0000H
	LJMP MAIN

ORG 0100H
MAIN:
	CLR A
	MOV A,#01H
	MOV 30H,A ;SECONDS
	MOV 31H,A ;MINUTES
	MOV 32H,A ;HOURS
	
	CALL INITDISPLAY

LOOP:
	CALL KEYSCAN
	CALL DELAY
	INC 30H
	CALL LCDDISPLAY
	JMP LOOP

KEYSCAN:
	JB P2.0,NOKEYPRESS
	JB P2.1,NOKEYPRESS
	MOV 30H,#00H
	MOV 31H,#00H
	MOV 32H,#00H
	RET
NOKEYPRESS:
	RET

INITDISPLAY:

	CLR P1.3

	CLR P1.7
	CLR P1.6
	SETB P1.5
	CLR P1.4

	SETB P1.2
	CLR P1.2

	CALL DELAY

	SETB P1.2
	CLR P1.2

	SETB P1.7
	
	SETB P1.2
	CLR P1.2
	
	CALL DELAY

	CLR P1.7
	CLR P1.6
	CLR P1.5
	CLR P1.4

	SETB P1.2
	CLR P1.2

	SETB P1.6
	SETB P1.5

	SETB P1.2
	CLR P1.2
	CALL DELAY

	CLR P1.7
	CLR P1.6
	CLR P1.5
	CLR P1.4

	SETB P1.2
	CLR P1.2

	SETB P1.7
	SETB P1.6
	SETB P1.5
	SETB P1.4

	SETB P1.2
	CLR P1.2

	CALL DELAY

	RET

SENDCHARACTER:
	MOV C,ACC.7
	MOV P1.7,C
	MOV C,ACC.6
	MOV P1.6,C
	MOV C,ACC.5
	MOV P1.5,C
	MOV C,ACC.4
	MOV P1.4,C

	SETB P1.2
	CLR P1.2

	MOV C,ACC.3
	MOV P1.7,C
	MOV C,ACC.2
	MOV P1.6,C
	MOV	C,ACC.1
	MOV P1.5,C
	MOV C,ACC.0
	MOV P1.4,C

	SETB P1.2
	CLR P1.2
	CALL DELAY

LCDDISPLAY:
	SETB P1.3
	MOV A,#30H
	MOV A,#3AH
	CALL SENDCHARACTER
	RET	

DELAY:
	MOV R0,#50
	DJNZ R0,$
	RET 